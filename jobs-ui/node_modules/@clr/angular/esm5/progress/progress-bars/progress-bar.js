import * as tslib_1 from "tslib";
/*
 * Copyright (c) 2016-2019 VMware, Inc. All Rights Reserved.
 * This software is released under MIT license.
 * The full license information can be found in LICENSE in the root directory of this project.
 */
import { Component, Input, HostBinding } from '@angular/core';
import { isBooleanAttributeSet } from '../../utils/component/is-boolean-attribute-set';
import { AriaLiveService, AriaLivePoliteness } from '../../utils/a11y/aria-live.service';
var ClrProgressBar = /** @class */ (function () {
    function ClrProgressBar(ariaLiveService) {
        this.ariaLiveService = ariaLiveService;
        this.externalId = '';
        // Progress
        this.max = 100;
        this._value = 0;
    }
    Object.defineProperty(ClrProgressBar.prototype, "id", {
        get: function () {
            return this._ID;
        },
        set: function (value) {
            this._ID = value;
            this.externalId = null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ClrProgressBar.prototype, "value", {
        get: function () {
            return this._value;
        },
        set: function (value) {
            this._value = value;
            if (this.displayAriaLive()) {
                this.ariaLiveService.announce(this.displayValue, this.ariaLive);
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ClrProgressBar.prototype, "progressClass", {
        // Styles
        get: function () {
            return true;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ClrProgressBar.prototype, "labeledClass", {
        get: function () {
            return this._labeled;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ClrProgressBar.prototype, "clrLabeled", {
        set: function (value) {
            this._labeled = isBooleanAttributeSet(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ClrProgressBar.prototype, "fadeClass", {
        get: function () {
            return this._fade;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ClrProgressBar.prototype, "clrFade", {
        set: function (value) {
            this._fade = isBooleanAttributeSet(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ClrProgressBar.prototype, "loopClass", {
        get: function () {
            return this._loop;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ClrProgressBar.prototype, "clrLoop", {
        set: function (value) {
            this._loop = isBooleanAttributeSet(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ClrProgressBar.prototype, "successClass", {
        get: function () {
            return this._success;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ClrProgressBar.prototype, "clrSuccess", {
        set: function (value) {
            this._success = isBooleanAttributeSet(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ClrProgressBar.prototype, "dangerClass", {
        get: function () {
            return this._danger;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ClrProgressBar.prototype, "clrDanger", {
        set: function (value) {
            this._danger = isBooleanAttributeSet(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ClrProgressBar.prototype, "flashClass", {
        get: function () {
            return this._flash;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ClrProgressBar.prototype, "clrFlash", {
        set: function (value) {
            this._flash = isBooleanAttributeSet(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ClrProgressBar.prototype, "flashDangerClass", {
        get: function () {
            return this._flashDanger;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ClrProgressBar.prototype, "clrFlashDanger", {
        set: function (value) {
            this._flashDanger = isBooleanAttributeSet(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ClrProgressBar.prototype, "displayValue", {
        /**
         * Make sure that we always will have something that is readable
         * for the screen reader
         */
        get: function () {
            if (this.displayval) {
                return this.displayval;
            }
            return this.value + "%";
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Display aria-live only when there is value and it's not 0 or equal to the max value
     */
    ClrProgressBar.prototype.displayAriaLive = function () {
        return (this.value !== undefined || this.value !== 0) && this.value !== this.max;
    };
    Object.defineProperty(ClrProgressBar.prototype, "ariaLive", {
        get: function () {
            if (isBooleanAttributeSet(this.assertive)) {
                return AriaLivePoliteness.assertive;
            }
            if (isBooleanAttributeSet(this.off)) {
                return AriaLivePoliteness.off;
            }
            return AriaLivePoliteness.polite;
        },
        enumerable: true,
        configurable: true
    });
    tslib_1.__decorate([
        HostBinding('attr.id'),
        tslib_1.__metadata("design:type", String)
    ], ClrProgressBar.prototype, "externalId", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", String),
        tslib_1.__metadata("design:paramtypes", [String])
    ], ClrProgressBar.prototype, "id", null);
    tslib_1.__decorate([
        Input('clrMax'),
        tslib_1.__metadata("design:type", Number)
    ], ClrProgressBar.prototype, "max", void 0);
    tslib_1.__decorate([
        Input('clrDisplayval'),
        tslib_1.__metadata("design:type", String)
    ], ClrProgressBar.prototype, "displayval", void 0);
    tslib_1.__decorate([
        Input('clrValue'),
        tslib_1.__metadata("design:type", Object),
        tslib_1.__metadata("design:paramtypes", [Object])
    ], ClrProgressBar.prototype, "value", null);
    tslib_1.__decorate([
        HostBinding('class.progress'),
        tslib_1.__metadata("design:type", Object),
        tslib_1.__metadata("design:paramtypes", [])
    ], ClrProgressBar.prototype, "progressClass", null);
    tslib_1.__decorate([
        HostBinding('class.labeled'),
        tslib_1.__metadata("design:type", Object),
        tslib_1.__metadata("design:paramtypes", [])
    ], ClrProgressBar.prototype, "labeledClass", null);
    tslib_1.__decorate([
        Input('clrLabeled'),
        tslib_1.__metadata("design:type", Object),
        tslib_1.__metadata("design:paramtypes", [Object])
    ], ClrProgressBar.prototype, "clrLabeled", null);
    tslib_1.__decorate([
        HostBinding('class.progress-fade'),
        tslib_1.__metadata("design:type", Object),
        tslib_1.__metadata("design:paramtypes", [])
    ], ClrProgressBar.prototype, "fadeClass", null);
    tslib_1.__decorate([
        Input('clrFade'),
        tslib_1.__metadata("design:type", Object),
        tslib_1.__metadata("design:paramtypes", [Object])
    ], ClrProgressBar.prototype, "clrFade", null);
    tslib_1.__decorate([
        HostBinding('class.loop'),
        tslib_1.__metadata("design:type", Object),
        tslib_1.__metadata("design:paramtypes", [])
    ], ClrProgressBar.prototype, "loopClass", null);
    tslib_1.__decorate([
        Input('clrLoop'),
        tslib_1.__metadata("design:type", Object),
        tslib_1.__metadata("design:paramtypes", [Object])
    ], ClrProgressBar.prototype, "clrLoop", null);
    tslib_1.__decorate([
        HostBinding('class.success'),
        tslib_1.__metadata("design:type", Object),
        tslib_1.__metadata("design:paramtypes", [])
    ], ClrProgressBar.prototype, "successClass", null);
    tslib_1.__decorate([
        Input('clrSuccess'),
        tslib_1.__metadata("design:type", Object),
        tslib_1.__metadata("design:paramtypes", [Object])
    ], ClrProgressBar.prototype, "clrSuccess", null);
    tslib_1.__decorate([
        HostBinding('class.danger'),
        tslib_1.__metadata("design:type", Object),
        tslib_1.__metadata("design:paramtypes", [])
    ], ClrProgressBar.prototype, "dangerClass", null);
    tslib_1.__decorate([
        Input('clrDanger'),
        tslib_1.__metadata("design:type", Object),
        tslib_1.__metadata("design:paramtypes", [Object])
    ], ClrProgressBar.prototype, "clrDanger", null);
    tslib_1.__decorate([
        HostBinding('class.flash'),
        tslib_1.__metadata("design:type", Object),
        tslib_1.__metadata("design:paramtypes", [])
    ], ClrProgressBar.prototype, "flashClass", null);
    tslib_1.__decorate([
        Input('clrFlash'),
        tslib_1.__metadata("design:type", Object),
        tslib_1.__metadata("design:paramtypes", [Object])
    ], ClrProgressBar.prototype, "clrFlash", null);
    tslib_1.__decorate([
        HostBinding('class.flash-danger'),
        tslib_1.__metadata("design:type", Object),
        tslib_1.__metadata("design:paramtypes", [])
    ], ClrProgressBar.prototype, "flashDangerClass", null);
    tslib_1.__decorate([
        Input('clrFlashDanger'),
        tslib_1.__metadata("design:type", Object),
        tslib_1.__metadata("design:paramtypes", [Object])
    ], ClrProgressBar.prototype, "clrFlashDanger", null);
    tslib_1.__decorate([
        Input('clrAssertive'),
        tslib_1.__metadata("design:type", Boolean)
    ], ClrProgressBar.prototype, "assertive", void 0);
    tslib_1.__decorate([
        Input('clrOff'),
        tslib_1.__metadata("design:type", Boolean)
    ], ClrProgressBar.prototype, "off", void 0);
    ClrProgressBar = tslib_1.__decorate([
        Component({
            providers: [AriaLiveService],
            selector: 'clr-progress-bar',
            template: "\n    <progress [id]=\"id\" [attr.max]=\"max\" [attr.value]=\"value\" [attr.data-displayval]=\"displayValue\"></progress>\n    <span *ngIf=\"displayAriaLive()\">{{ displayValue }}</span>\n  "
        }),
        tslib_1.__metadata("design:paramtypes", [AriaLiveService])
    ], ClrProgressBar);
    return ClrProgressBar;
}());
export { ClrProgressBar };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvZ3Jlc3MtYmFyLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGNsci9hbmd1bGFyLyIsInNvdXJjZXMiOlsicHJvZ3Jlc3MvcHJvZ3Jlc3MtYmFycy9wcm9ncmVzcy1iYXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7O0dBSUc7QUFDSCxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxXQUFXLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDOUQsT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0sZ0RBQWdELENBQUM7QUFDdkYsT0FBTyxFQUFFLGVBQWUsRUFBRSxrQkFBa0IsRUFBRSxNQUFNLG9DQUFvQyxDQUFDO0FBVXpGO0lBQ0Usd0JBQW9CLGVBQWdDO1FBQWhDLG9CQUFlLEdBQWYsZUFBZSxDQUFpQjtRQU01QixlQUFVLEdBQVcsRUFBRSxDQUFDO1FBVWhELFdBQVc7UUFDTSxRQUFHLEdBQVcsR0FBRyxDQUFDO1FBRzNCLFdBQU0sR0FBVyxDQUFDLENBQUM7SUFwQjRCLENBQUM7SUFReEQsc0JBQUksOEJBQUU7YUFJTjtZQUNFLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQztRQUNsQixDQUFDO2FBTkQsVUFBTyxLQUFhO1lBQ2xCLElBQUksQ0FBQyxHQUFHLEdBQUcsS0FBSyxDQUFDO1lBQ2pCLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO1FBQ3pCLENBQUM7OztPQUFBO0lBV0Qsc0JBQUksaUNBQUs7YUFBVDtZQUNFLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQztRQUNyQixDQUFDO2FBRUQsVUFBVSxLQUFLO1lBQ2IsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7WUFDcEIsSUFBSSxJQUFJLENBQUMsZUFBZSxFQUFFLEVBQUU7Z0JBQzFCLElBQUksQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxZQUFZLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO2FBQ2pFO1FBQ0gsQ0FBQzs7O09BUEE7SUFX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Q0FBQzs7K0NBQWM7SUF2SG5CLGNBQWM7UUFSMUIsU0FBUyxDQUFDO1lBQ1QsU0FBUyxFQUFFLENBQUMsZUFBZSxDQUFDO1lBQzVCLFFBQVEsRUFBRSxrQkFBa0I7WUFDNUIsUUFBUSxFQUFFLGdNQUdUO1NBQ0YsQ0FBQztpREFFcUMsZUFBZTtPQUR6QyxjQUFjLENBb0oxQjtJQUFELHFCQUFDO0NBQUEsQUFwSkQsSUFvSkM7U0FwSlksY0FBYyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTYtMjAxOSBWTXdhcmUsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIFRoaXMgc29mdHdhcmUgaXMgcmVsZWFzZWQgdW5kZXIgTUlUIGxpY2Vuc2UuXG4gKiBUaGUgZnVsbCBsaWNlbnNlIGluZm9ybWF0aW9uIGNhbiBiZSBmb3VuZCBpbiBMSUNFTlNFIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHByb2plY3QuXG4gKi9cbmltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIEhvc3RCaW5kaW5nIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBpc0Jvb2xlYW5BdHRyaWJ1dGVTZXQgfSBmcm9tICcuLi8uLi91dGlscy9jb21wb25lbnQvaXMtYm9vbGVhbi1hdHRyaWJ1dGUtc2V0JztcbmltcG9ydCB7IEFyaWFMaXZlU2VydmljZSwgQXJpYUxpdmVQb2xpdGVuZXNzIH0gZnJvbSAnLi4vLi4vdXRpbHMvYTExeS9hcmlhLWxpdmUuc2VydmljZSc7XG5cbkBDb21wb25lbnQoe1xuICBwcm92aWRlcnM6IFtBcmlhTGl2ZVNlcnZpY2VdLFxuICBzZWxlY3RvcjogJ2Nsci1wcm9ncmVzcy1iYXInLFxuICB0ZW1wbGF0ZTogYFxuICAgIDxwcm9ncmVzcyBbaWRdPVwiaWRcIiBbYXR0ci5tYXhdPVwibWF4XCIgW2F0dHIudmFsdWVdPVwidmFsdWVcIiBbYXR0ci5kYXRhLWRpc3BsYXl2YWxdPVwiZGlzcGxheVZhbHVlXCI+PC9wcm9ncmVzcz5cbiAgICA8c3BhbiAqbmdJZj1cImRpc3BsYXlBcmlhTGl2ZSgpXCI+e3sgZGlzcGxheVZhbHVlIH19PC9zcGFuPlxuICBgLFxufSlcbmV4cG9ydCBjbGFzcyBDbHJQcm9ncmVzc0JhciB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgYXJpYUxpdmVTZXJ2aWNlOiBBcmlhTGl2ZVNlcnZpY2UpIHt9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBjb21wb25lbnQgSURcbiAgICovXG4gIHByaXZhdGUgX0lEOiBzdHJpbmc7XG4gIEBIb3N0QmluZGluZygnYXR0ci5pZCcpIGV4dGVybmFsSWQ6IHN0cmluZyA9ICcnO1xuICBASW5wdXQoKVxuICBzZXQgaWQodmFsdWU6IHN0cmluZykge1xuICAgIHRoaXMuX0lEID0gdmFsdWU7XG4gICAgdGhpcy5leHRlcm5hbElkID0gbnVsbDtcbiAgfVxuICBnZXQgaWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX0lEO1xuICB9XG5cbiAgLy8gUHJvZ3Jlc3NcbiAgQElucHV0KCdjbHJNYXgnKSBtYXg6IG51bWJlciA9IDEwMDtcbiAgQElucHV0KCdjbHJEaXNwbGF5dmFsJykgZGlzcGxheXZhbDogc3RyaW5nO1xuXG4gIHByaXZhdGUgX3ZhbHVlOiBudW1iZXIgPSAwO1xuICBASW5wdXQoJ2NsclZhbHVlJylcbiAgZ2V0IHZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLl92YWx1ZTtcbiAgfVxuXG4gIHNldCB2YWx1ZSh2YWx1ZSkge1xuICAgIHRoaXMuX3ZhbHVlID0gdmFsdWU7XG4gICAgaWYgKHRoaXMuZGlzcGxheUFyaWFMaXZlKCkpIHtcbiAgICAgIHRoaXMuYXJpYUxpdmVTZXJ2aWNlLmFubm91bmNlKHRoaXMuZGlzcGxheVZhbHVlLCB0aGlzLmFyaWFMaXZlKTtcbiAgICB9XG4gIH1cblxuICAvLyBTdHlsZXNcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5wcm9ncmVzcycpXG4gIGdldCBwcm9ncmVzc0NsYXNzKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBfbGFiZWxlZDogYm9vbGVhbjtcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5sYWJlbGVkJylcbiAgZ2V0IGxhYmVsZWRDbGFzcygpIHtcbiAgICByZXR1cm4gdGhpcy5fbGFiZWxlZDtcbiAgfVxuXG4gIEBJbnB1dCgnY2xyTGFiZWxlZCcpXG4gIHNldCBjbHJMYWJlbGVkKHZhbHVlOiBib29sZWFuIHwgc3RyaW5nKSB7XG4gICAgdGhpcy5fbGFiZWxlZCA9IGlzQm9vbGVhbkF0dHJpYnV0ZVNldCh2YWx1ZSk7XG4gIH1cblxuICBwcml2YXRlIF9mYWRlOiBib29sZWFuO1xuICBASG9zdEJpbmRpbmcoJ2NsYXNzLnByb2dyZXNzLWZhZGUnKVxuICBnZXQgZmFkZUNsYXNzKCkge1xuICAgIHJldHVybiB0aGlzLl9mYWRlO1xuICB9XG5cbiAgQElucHV0KCdjbHJGYWRlJylcbiAgc2V0IGNsckZhZGUodmFsdWU6IGJvb2xlYW4gfCBzdHJpbmcpIHtcbiAgICB0aGlzLl9mYWRlID0gaXNCb29sZWFuQXR0cmlidXRlU2V0KHZhbHVlKTtcbiAgfVxuXG4gIHByaXZhdGUgX2xvb3A6IGJvb2xlYW47XG4gIEBIb3N0QmluZGluZygnY2xhc3MubG9vcCcpXG4gIGdldCBsb29wQ2xhc3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xvb3A7XG4gIH1cblxuICBASW5wdXQoJ2Nsckxvb3AnKVxuICBzZXQgY2xyTG9vcCh2YWx1ZTogYm9vbGVhbiB8IHN0cmluZykge1xuICAgIHRoaXMuX2xvb3AgPSBpc0Jvb2xlYW5BdHRyaWJ1dGVTZXQodmFsdWUpO1xuICB9XG5cbiAgcHJpdmF0ZSBfc3VjY2VzczogYm9vbGVhbjtcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5zdWNjZXNzJylcbiAgZ2V0IHN1Y2Nlc3NDbGFzcygpIHtcbiAgICByZXR1cm4gdGhpcy5fc3VjY2VzcztcbiAgfVxuXG4gIEBJbnB1dCgnY2xyU3VjY2VzcycpXG4gIHNldCBjbHJTdWNjZXNzKHZhbHVlOiBib29sZWFuIHwgc3RyaW5nKSB7XG4gICAgdGhpcy5fc3VjY2VzcyA9IGlzQm9vbGVhbkF0dHJpYnV0ZVNldCh2YWx1ZSk7XG4gIH1cblxuICBwcml2YXRlIF9kYW5nZXI6IGJvb2xlYW47XG4gIEBIb3N0QmluZGluZygnY2xhc3MuZGFuZ2VyJylcbiAgZ2V0IGRhbmdlckNsYXNzKCkge1xuICAgIHJldHVybiB0aGlzLl9kYW5nZXI7XG4gIH1cblxuICBASW5wdXQoJ2NsckRhbmdlcicpXG4gIHNldCBjbHJEYW5nZXIodmFsdWU6IGJvb2xlYW4gfCBzdHJpbmcpIHtcbiAgICB0aGlzLl9kYW5nZXIgPSBpc0Jvb2xlYW5BdHRyaWJ1dGVTZXQodmFsdWUpO1xuICB9XG5cbiAgcHJpdmF0ZSBfZmxhc2g6IGJvb2xlYW47XG4gIEBIb3N0QmluZGluZygnY2xhc3MuZmxhc2gnKVxuICBnZXQgZmxhc2hDbGFzcygpIHtcbiAgICByZXR1cm4gdGhpcy5fZmxhc2g7XG4gIH1cblxuICBASW5wdXQoJ2NsckZsYXNoJylcbiAgc2V0IGNsckZsYXNoKHZhbHVlOiBib29sZWFuIHwgc3RyaW5nKSB7XG4gICAgdGhpcy5fZmxhc2ggPSBpc0Jvb2xlYW5BdHRyaWJ1dGVTZXQodmFsdWUpO1xuICB9XG5cbiAgcHJpdmF0ZSBfZmxhc2hEYW5nZXI6IGJvb2xlYW47XG4gIEBIb3N0QmluZGluZygnY2xhc3MuZmxhc2gtZGFuZ2VyJylcbiAgZ2V0IGZsYXNoRGFuZ2VyQ2xhc3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ZsYXNoRGFuZ2VyO1xuICB9XG5cbiAgQElucHV0KCdjbHJGbGFzaERhbmdlcicpXG4gIHNldCBjbHJGbGFzaERhbmdlcih2YWx1ZTogYm9vbGVhbiB8IHN0cmluZykge1xuICAgIHRoaXMuX2ZsYXNoRGFuZ2VyID0gaXNCb29sZWFuQXR0cmlidXRlU2V0KHZhbHVlKTtcbiAgfVxuXG4gIC8vIEFyaWEgTGl2ZVxuICBASW5wdXQoJ2NsckFzc2VydGl2ZScpIGFzc2VydGl2ZTogYm9vbGVhbjtcbiAgQElucHV0KCdjbHJPZmYnKSBvZmY6IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIE1ha2Ugc3VyZSB0aGF0IHdlIGFsd2F5cyB3aWxsIGhhdmUgc29tZXRoaW5nIHRoYXQgaXMgcmVhZGFibGVcbiAgICogZm9yIHRoZSBzY3JlZW4gcmVhZGVyXG4gICAqL1xuICBnZXQgZGlzcGxheVZhbHVlKCkge1xuICAgIGlmICh0aGlzLmRpc3BsYXl2YWwpIHtcbiAgICAgIHJldHVybiB0aGlzLmRpc3BsYXl2YWw7XG4gICAgfVxuICAgIHJldHVybiBgJHt0aGlzLnZhbHVlfSVgO1xuICB9XG5cbiAgLyoqXG4gICAqIERpc3BsYXkgYXJpYS1saXZlIG9ubHkgd2hlbiB0aGVyZSBpcyB2YWx1ZSBhbmQgaXQncyBub3QgMCBvciBlcXVhbCB0byB0aGUgbWF4IHZhbHVlXG4gICAqL1xuICBkaXNwbGF5QXJpYUxpdmUoKSB7XG4gICAgcmV0dXJuICh0aGlzLnZhbHVlICE9PSB1bmRlZmluZWQgfHwgdGhpcy52YWx1ZSAhPT0gMCkgJiYgdGhpcy52YWx1ZSAhPT0gdGhpcy5tYXg7XG4gIH1cblxuICBnZXQgYXJpYUxpdmUoKTogQXJpYUxpdmVQb2xpdGVuZXNzIHtcbiAgICBpZiAoaXNCb29sZWFuQXR0cmlidXRlU2V0KHRoaXMuYXNzZXJ0aXZlKSkge1xuICAgICAgcmV0dXJuIEFyaWFMaXZlUG9saXRlbmVzcy5hc3NlcnRpdmU7XG4gICAgfVxuICAgIGlmIChpc0Jvb2xlYW5BdHRyaWJ1dGVTZXQodGhpcy5vZmYpKSB7XG4gICAgICByZXR1cm4gQXJpYUxpdmVQb2xpdGVuZXNzLm9mZjtcbiAgICB9XG4gICAgcmV0dXJuIEFyaWFMaXZlUG9saXRlbmVzcy5wb2xpdGU7XG4gIH1cbn1cbiJdfQ==
import * as tslib_1 from "tslib";
/*
 * Copyright (c) 2016-2019 VMware, Inc. All Rights Reserved.
 * This software is released under MIT license.
 * The full license information can be found in LICENSE in the root directory of this project.
 */
import { Component, Input, HostBinding } from '@angular/core';
import { isBooleanAttributeSet } from '../../utils/component/is-boolean-attribute-set';
import { AriaLiveService, AriaLivePoliteness } from '../../utils/a11y/aria-live.service';
let ClrProgressBar = class ClrProgressBar {
    constructor(ariaLiveService) {
        this.ariaLiveService = ariaLiveService;
        this.externalId = '';
        // Progress
        this.max = 100;
        this._value = 0;
    }
    set id(value) {
        this._ID = value;
        this.externalId = null;
    }
    get id() {
        return this._ID;
    }
    get value() {
        return this._value;
    }
    set value(value) {
        this._value = value;
        if (this.displayAriaLive()) {
            this.ariaLiveService.announce(this.displayValue, this.ariaLive);
        }
    }
    // Styles
    get progressClass() {
        return true;
    }
    get labeledClass() {
        return this._labeled;
    }
    set clrLabeled(value) {
        this._labeled = isBooleanAttributeSet(value);
    }
    get fadeClass() {
        return this._fade;
    }
    set clrFade(value) {
        this._fade = isBooleanAttributeSet(value);
    }
    get loopClass() {
        return this._loop;
    }
    set clrLoop(value) {
        this._loop = isBooleanAttributeSet(value);
    }
    get successClass() {
        return this._success;
    }
    set clrSuccess(value) {
        this._success = isBooleanAttributeSet(value);
    }
    get dangerClass() {
        return this._danger;
    }
    set clrDanger(value) {
        this._danger = isBooleanAttributeSet(value);
    }
    get flashClass() {
        return this._flash;
    }
    set clrFlash(value) {
        this._flash = isBooleanAttributeSet(value);
    }
    get flashDangerClass() {
        return this._flashDanger;
    }
    set clrFlashDanger(value) {
        this._flashDanger = isBooleanAttributeSet(value);
    }
    /**
     * Make sure that we always will have something that is readable
     * for the screen reader
     */
    get displayValue() {
        if (this.displayval) {
            return this.displayval;
        }
        return `${this.value}%`;
    }
    /**
     * Display aria-live only when there is value and it's not 0 or equal to the max value
     */
    displayAriaLive() {
        return (this.value !== undefined || this.value !== 0) && this.value !== this.max;
    }
    get ariaLive() {
        if (isBooleanAttributeSet(this.assertive)) {
            return AriaLivePoliteness.assertive;
        }
        if (isBooleanAttributeSet(this.off)) {
            return AriaLivePoliteness.off;
        }
        return AriaLivePoliteness.polite;
    }
};
tslib_1.__decorate([
    HostBinding('attr.id'),
    tslib_1.__metadata("design:type", String)
], ClrProgressBar.prototype, "externalId", void 0);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", String),
    tslib_1.__metadata("design:paramtypes", [String])
], ClrProgressBar.prototype, "id", null);
tslib_1.__decorate([
    Input('clrMax'),
    tslib_1.__metadata("design:type", Number)
], ClrProgressBar.prototype, "max", void 0);
tslib_1.__decorate([
    Input('clrDisplayval'),
    tslib_1.__metadata("design:type", String)
], ClrProgressBar.prototype, "displayval", void 0);
tslib_1.__decorate([
    Input('clrValue'),
    tslib_1.__metadata("design:type", Object),
    tslib_1.__metadata("design:paramtypes", [Object])
], ClrProgressBar.prototype, "value", null);
tslib_1.__decorate([
    HostBinding('class.progress'),
    tslib_1.__metadata("design:type", Object),
    tslib_1.__metadata("design:paramtypes", [])
], ClrProgressBar.prototype, "progressClass", null);
tslib_1.__decorate([
    HostBinding('class.labeled'),
    tslib_1.__metadata("design:type", Object),
    tslib_1.__metadata("design:paramtypes", [])
], ClrProgressBar.prototype, "labeledClass", null);
tslib_1.__decorate([
    Input('clrLabeled'),
    tslib_1.__metadata("design:type", Object),
    tslib_1.__metadata("design:paramtypes", [Object])
], ClrProgressBar.prototype, "clrLabeled", null);
tslib_1.__decorate([
    HostBinding('class.progress-fade'),
    tslib_1.__metadata("design:type", Object),
    tslib_1.__metadata("design:paramtypes", [])
], ClrProgressBar.prototype, "fadeClass", null);
tslib_1.__decorate([
    Input('clrFade'),
    tslib_1.__metadata("design:type", Object),
    tslib_1.__metadata("design:paramtypes", [Object])
], ClrProgressBar.prototype, "clrFade", null);
tslib_1.__decorate([
    HostBinding('class.loop'),
    tslib_1.__metadata("design:type", Object),
    tslib_1.__metadata("design:paramtypes", [])
], ClrProgressBar.prototype, "loopClass", null);
tslib_1.__decorate([
    Input('clrLoop'),
    tslib_1.__metadata("design:type", Object),
    tslib_1.__metadata("design:paramtypes", [Object])
], ClrProgressBar.prototype, "clrLoop", null);
tslib_1.__decorate([
    HostBinding('class.success'),
    tslib_1.__metadata("design:type", Object),
    tslib_1.__metadata("design:paramtypes", [])
], ClrProgressBar.prototype, "successClass", null);
tslib_1.__decorate([
    Input('clrSuccess'),
    tslib_1.__metadata("design:type", Object),
    tslib_1.__metadata("design:paramtypes", [Object])
], ClrProgressBar.prototype, "clrSuccess", null);
tslib_1.__decorate([
    HostBinding('class.danger'),
    tslib_1.__metadata("design:type", Object),
    tslib_1.__metadata("design:paramtypes", [])
], ClrProgressBar.prototype, "dangerClass", null);
tslib_1.__decorate([
    Input('clrDanger'),
    tslib_1.__metadata("design:type", Object),
    tslib_1.__metadata("design:paramtypes", [Object])
], ClrProgressBar.prototype, "clrDanger", null);
tslib_1.__decorate([
    HostBinding('class.flash'),
    tslib_1.__metadata("design:type", Object),
    tslib_1.__metadata("design:paramtypes", [])
], ClrProgressBar.prototype, "flashClass", null);
tslib_1.__decorate([
    Input('clrFlash'),
    tslib_1.__metadata("design:type", Object),
    tslib_1.__metadata("design:paramtypes", [Object])
], ClrProgressBar.prototype, "clrFlash", null);
tslib_1.__decorate([
    HostBinding('class.flash-danger'),
    tslib_1.__metadata("design:type", Object),
    tslib_1.__metadata("design:paramtypes", [])
], ClrProgressBar.prototype, "flashDangerClass", null);
tslib_1.__decorate([
    Input('clrFlashDanger'),
    tslib_1.__metadata("design:type", Object),
    tslib_1.__metadata("design:paramtypes", [Object])
], ClrProgressBar.prototype, "clrFlashDanger", null);
tslib_1.__decorate([
    Input('clrAssertive'),
    tslib_1.__metadata("design:type", Boolean)
], ClrProgressBar.prototype, "assertive", void 0);
tslib_1.__decorate([
    Input('clrOff'),
    tslib_1.__metadata("design:type", Boolean)
], ClrProgressBar.prototype, "off", void 0);
ClrProgressBar = tslib_1.__decorate([
    Component({
        providers: [AriaLiveService],
        selector: 'clr-progress-bar',
        template: `
    <progress [id]="id" [attr.max]="max" [attr.value]="value" [attr.data-displayval]="displayValue"></progress>
    <span *ngIf="displayAriaLive()">{{ displayValue }}</span>
  `
    }),
    tslib_1.__metadata("design:paramtypes", [AriaLiveService])
], ClrProgressBar);
export { ClrProgressBar };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvZ3Jlc3MtYmFyLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGNsci9hbmd1bGFyLyIsInNvdXJjZXMiOlsicHJvZ3Jlc3MvcHJvZ3Jlc3MtYmFycy9wcm9ncmVzcy1iYXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7O0dBSUc7QUFDSCxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxXQUFXLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDOUQsT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0sZ0RBQWdELENBQUM7QUFDdkYsT0FBTyxFQUFFLGVBQWUsRUFBRSxrQkFBa0IsRUFBRSxNQUFNLG9DQUFvQyxDQUFDO0FBVXpGLElBQWEsY0FBYyxHQUEzQixNQUFhLGNBQWM7SUFDekIsWUFBb0IsZUFBZ0M7UUFBaEMsb0JBQWUsR0FBZixlQUFlLENBQWlCO1FBTTVCLGVBQVUsR0FBVyxFQUFFLENBQUM7UUFVaEQsV0FBVztRQUNNLFFBQUcsR0FBVyxHQUFHLENBQUM7UUFHM0IsV0FBTSxHQUFXLENBQUMsQ0FBQztJQXBCNEIsQ0FBQztJQVF4RCxJQUFJLEVBQUUsQ0FBQyxLQUFhO1FBQ2xCLElBQUksQ0FBQyxHQUFHLEdBQUcsS0FBSyxDQUFDO1FBQ2pCLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO0lBQ3pCLENBQUM7SUFDRCxJQUFJLEVBQUU7UUFDSixPQUFPLElBQUksQ0FBQyxHQUFHLENBQUM7SUFDbEIsQ0FBQztJQVFELElBQUksS0FBSztRQUNQLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUNyQixDQUFDO0lBRUQsSUFBSSxLQUFLLENBQUMsS0FBSztRQUNiLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO1FBQ3BCLElBQUksSUFBSSxDQUFDLGVBQWUsRUFBRSxFQUFFO1lBQzFCLElBQUksQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxZQUFZLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQ2pFO0lBQ0gsQ0FBQztJQUVELFNBQVM7SUFFVCxJQUFJLGFBQWE7UUFDZixPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFJRCxJQUFJLFlBQVk7UUFDZCxPQUFPLElBQUksQ0FBQyxRQUFRLENBQUM7SUFDdkIsQ0FBQztJQUdELElBQUksVUFBVSxDQUFDLEtBQXVCO1FBQ3BDLElBQUksQ0FBQyxRQUFRLEdBQUcscUJBQXFCLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDL0MsQ0FBQztJQUlELElBQUksU0FBUztRQUNYLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQztJQUNwQixDQUFDO0lBR0QsSUFBSSxPQUFPLENBQUMsS0FBdUI7UUFDakMsSUFBSSxDQUFDLEtBQUssR0FBRyxxQkFBcUIsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUM1QyxDQUFDO0lBSUQsSUFBSSxTQUFTO1FBQ1gsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ3BCLENBQUM7SUFHRCxJQUFJLE9BQU8sQ0FBQyxLQUF1QjtRQUNqQyxJQUFJLENBQUMsS0FBSyxHQUFHLHFCQUFxQixDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzVDLENBQUM7SUFJRCxJQUFJLFlBQVk7UUFDZCxPQUFPLElBQUksQ0FBQyxRQUFRLENBQUM7SUFDdkIsQ0FBQztJQUdELElBQUksVUFBVSxDQUFDLEtBQXVCO1FBQ3BDLElBQUksQ0FBQyxRQUFRLEdBQUcscUJBQXFCLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDL0MsQ0FBQztJQUlELElBQUksV0FBVztRQUNiLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQztJQUN0QixDQUFDO0lBR0QsSUFBSSxTQUFTLENBQUMsS0FBdUI7UUFDbkMsSUFBSSxDQUFDLE9BQU8sR0FBRyxxQkFBcUIsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUM5QyxDQUFDO0lBSUQsSUFBSSxVQUFVO1FBQ1osT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDO0lBQ3JCLENBQUM7SUFHRCxJQUFJLFFBQVEsQ0FBQyxLQUF1QjtRQUNsQyxJQUFJLENBQUMsTUFBTSxHQUFHLHFCQUFxQixDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzdDLENBQUM7SUFJRCxJQUFJLGdCQUFnQjtRQUNsQixPQUFPLElBQUksQ0FBQyxZQUFZLENBQUM7SUFDM0IsQ0FBQztJQUdELElBQUksY0FBYyxDQUFDLEtBQXVCO1FBQ3hDLElBQUksQ0FBQyxZQUFZLEdBQUcscUJBQXFCLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDbkQsQ0FBQztJQU1EOzs7T0FHRztJQUNILElBQUksWUFBWTtRQUNkLElBQUksSUFBSSxDQUFDLFVBQVUsRUFBRTtZQUNuQixPQUFPLElBQUksQ0FBQyxVQUFVLENBQUM7U0FDeEI7UUFDRCxPQUFPLEdBQUcsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDO0lBQzFCLENBQUM7SUFFRDs7T0FFRztJQUNILGVBQWU7UUFDYixPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssS0FBSyxTQUFTLElBQUksSUFBSSxDQUFDLEtBQUssS0FBSyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsS0FBSyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUM7SUFDbkYsQ0FBQztJQUVELElBQUksUUFBUTtRQUNWLElBQUkscUJBQXFCLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFO1lBQ3pDLE9BQU8sa0JBQWtCLENBQUMsU0FBUyxDQUFDO1NBQ3JDO1FBQ0QsSUFBSSxxQkFBcUIsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUU7WUFDbkMsT0FBTyxrQkFBa0IsQ0FBQyxHQUFHLENBQUM7U0FDL0I7UUFDRCxPQUFPLGtCQUFrQixDQUFDLE1BQU0sQ0FBQztJQUNuQyxDQUFDO0NBQ0YsQ0FBQTtBQTdJeUI7SUFBdkIsV0FBVyxDQUFDLFNBQVMsQ0FBQzs7a0RBQXlCO0FBRWhEO0lBREMsS0FBSyxFQUFFOzs7d0NBSVA7QUFNZ0I7SUFBaEIsS0FBSyxDQUFDLFFBQVEsQ0FBQzs7MkNBQW1CO0FBQ1g7SUFBdkIsS0FBSyxDQUFDLGVBQWUsQ0FBQzs7a0RBQW9CO0FBSTNDO0lBREMsS0FBSyxDQUFDLFVBQVUsQ0FBQzs7OzJDQUdqQjtBQVdEO0lBREMsV0FBVyxDQUFDLGdCQUFnQixDQUFDOzs7bURBRzdCO0FBSUQ7SUFEQyxXQUFXLENBQUMsZUFBZSxDQUFDOzs7a0RBRzVCO0FBR0Q7SUFEQyxLQUFLLENBQUMsWUFBWSxDQUFDOzs7Z0RBR25CO0FBSUQ7SUFEQyxXQUFXLENBQUMscUJBQXFCLENBQUM7OzsrQ0FHbEM7QUFHRDtJQURDLEtBQUssQ0FBQyxTQUFTLENBQUM7Ozs2Q0FHaEI7QUFJRDtJQURDLFdBQVcsQ0FBQyxZQUFZLENBQUM7OzsrQ0FHekI7QUFHRDtJQURDLEtBQUssQ0FBQyxTQUFTLENBQUM7Ozs2Q0FHaEI7QUFJRDtJQURDLFdBQVcsQ0FBQyxlQUFlLENBQUM7OztrREFHNUI7QUFHRDtJQURDLEtBQUssQ0FBQyxZQUFZLENBQUM7OztnREFHbkI7QUFJRDtJQURDLFdBQVcsQ0FBQyxjQUFjLENBQUM7OztpREFHM0I7QUFHRDtJQURDLEtBQUssQ0FBQyxXQUFXLENBQUM7OzsrQ0FHbEI7QUFJRDtJQURDLFdBQVcsQ0FBQyxhQUFhLENBQUM7OztnREFHMUI7QUFHRDtJQURDLEtBQUssQ0FBQyxVQUFVLENBQUM7Ozs4Q0FHakI7QUFJRDtJQURDLFdBQVcsQ0FBQyxvQkFBb0IsQ0FBQzs7O3NEQUdqQztBQUdEO0lBREMsS0FBSyxDQUFDLGdCQUFnQixDQUFDOzs7b0RBR3ZCO0FBR3NCO0lBQXRCLEtBQUssQ0FBQyxjQUFjLENBQUM7O2lEQUFvQjtBQUN6QjtJQUFoQixLQUFLLENBQUMsUUFBUSxDQUFDOzsyQ0FBYztBQXZIbkIsY0FBYztJQVIxQixTQUFTLENBQUM7UUFDVCxTQUFTLEVBQUUsQ0FBQyxlQUFlLENBQUM7UUFDNUIsUUFBUSxFQUFFLGtCQUFrQjtRQUM1QixRQUFRLEVBQUU7OztHQUdUO0tBQ0YsQ0FBQzs2Q0FFcUMsZUFBZTtHQUR6QyxjQUFjLENBb0oxQjtTQXBKWSxjQUFjIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIENvcHlyaWdodCAoYykgMjAxNi0yMDE5IFZNd2FyZSwgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogVGhpcyBzb2Z0d2FyZSBpcyByZWxlYXNlZCB1bmRlciBNSVQgbGljZW5zZS5cbiAqIFRoZSBmdWxsIGxpY2Vuc2UgaW5mb3JtYXRpb24gY2FuIGJlIGZvdW5kIGluIExJQ0VOU0UgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgcHJvamVjdC5cbiAqL1xuaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgSG9zdEJpbmRpbmcgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IGlzQm9vbGVhbkF0dHJpYnV0ZVNldCB9IGZyb20gJy4uLy4uL3V0aWxzL2NvbXBvbmVudC9pcy1ib29sZWFuLWF0dHJpYnV0ZS1zZXQnO1xuaW1wb3J0IHsgQXJpYUxpdmVTZXJ2aWNlLCBBcmlhTGl2ZVBvbGl0ZW5lc3MgfSBmcm9tICcuLi8uLi91dGlscy9hMTF5L2FyaWEtbGl2ZS5zZXJ2aWNlJztcblxuQENvbXBvbmVudCh7XG4gIHByb3ZpZGVyczogW0FyaWFMaXZlU2VydmljZV0sXG4gIHNlbGVjdG9yOiAnY2xyLXByb2dyZXNzLWJhcicsXG4gIHRlbXBsYXRlOiBgXG4gICAgPHByb2dyZXNzIFtpZF09XCJpZFwiIFthdHRyLm1heF09XCJtYXhcIiBbYXR0ci52YWx1ZV09XCJ2YWx1ZVwiIFthdHRyLmRhdGEtZGlzcGxheXZhbF09XCJkaXNwbGF5VmFsdWVcIj48L3Byb2dyZXNzPlxuICAgIDxzcGFuICpuZ0lmPVwiZGlzcGxheUFyaWFMaXZlKClcIj57eyBkaXNwbGF5VmFsdWUgfX08L3NwYW4+XG4gIGAsXG59KVxuZXhwb3J0IGNsYXNzIENsclByb2dyZXNzQmFyIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBhcmlhTGl2ZVNlcnZpY2U6IEFyaWFMaXZlU2VydmljZSkge31cblxuICAvKipcbiAgICogSGFuZGxlIGNvbXBvbmVudCBJRFxuICAgKi9cbiAgcHJpdmF0ZSBfSUQ6IHN0cmluZztcbiAgQEhvc3RCaW5kaW5nKCdhdHRyLmlkJykgZXh0ZXJuYWxJZDogc3RyaW5nID0gJyc7XG4gIEBJbnB1dCgpXG4gIHNldCBpZCh2YWx1ZTogc3RyaW5nKSB7XG4gICAgdGhpcy5fSUQgPSB2YWx1ZTtcbiAgICB0aGlzLmV4dGVybmFsSWQgPSBudWxsO1xuICB9XG4gIGdldCBpZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fSUQ7XG4gIH1cblxuICAvLyBQcm9ncmVzc1xuICBASW5wdXQoJ2Nsck1heCcpIG1heDogbnVtYmVyID0gMTAwO1xuICBASW5wdXQoJ2NsckRpc3BsYXl2YWwnKSBkaXNwbGF5dmFsOiBzdHJpbmc7XG5cbiAgcHJpdmF0ZSBfdmFsdWU6IG51bWJlciA9IDA7XG4gIEBJbnB1dCgnY2xyVmFsdWUnKVxuICBnZXQgdmFsdWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xuICB9XG5cbiAgc2V0IHZhbHVlKHZhbHVlKSB7XG4gICAgdGhpcy5fdmFsdWUgPSB2YWx1ZTtcbiAgICBpZiAodGhpcy5kaXNwbGF5QXJpYUxpdmUoKSkge1xuICAgICAgdGhpcy5hcmlhTGl2ZVNlcnZpY2UuYW5ub3VuY2UodGhpcy5kaXNwbGF5VmFsdWUsIHRoaXMuYXJpYUxpdmUpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFN0eWxlc1xuICBASG9zdEJpbmRpbmcoJ2NsYXNzLnByb2dyZXNzJylcbiAgZ2V0IHByb2dyZXNzQ2xhc3MoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcml2YXRlIF9sYWJlbGVkOiBib29sZWFuO1xuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmxhYmVsZWQnKVxuICBnZXQgbGFiZWxlZENsYXNzKCkge1xuICAgIHJldHVybiB0aGlzLl9sYWJlbGVkO1xuICB9XG5cbiAgQElucHV0KCdjbHJMYWJlbGVkJylcbiAgc2V0IGNsckxhYmVsZWQodmFsdWU6IGJvb2xlYW4gfCBzdHJpbmcpIHtcbiAgICB0aGlzLl9sYWJlbGVkID0gaXNCb29sZWFuQXR0cmlidXRlU2V0KHZhbHVlKTtcbiAgfVxuXG4gIHByaXZhdGUgX2ZhZGU6IGJvb2xlYW47XG4gIEBIb3N0QmluZGluZygnY2xhc3MucHJvZ3Jlc3MtZmFkZScpXG4gIGdldCBmYWRlQ2xhc3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ZhZGU7XG4gIH1cblxuICBASW5wdXQoJ2NsckZhZGUnKVxuICBzZXQgY2xyRmFkZSh2YWx1ZTogYm9vbGVhbiB8IHN0cmluZykge1xuICAgIHRoaXMuX2ZhZGUgPSBpc0Jvb2xlYW5BdHRyaWJ1dGVTZXQodmFsdWUpO1xuICB9XG5cbiAgcHJpdmF0ZSBfbG9vcDogYm9vbGVhbjtcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5sb29wJylcbiAgZ2V0IGxvb3BDbGFzcygpIHtcbiAgICByZXR1cm4gdGhpcy5fbG9vcDtcbiAgfVxuXG4gIEBJbnB1dCgnY2xyTG9vcCcpXG4gIHNldCBjbHJMb29wKHZhbHVlOiBib29sZWFuIHwgc3RyaW5nKSB7XG4gICAgdGhpcy5fbG9vcCA9IGlzQm9vbGVhbkF0dHJpYnV0ZVNldCh2YWx1ZSk7XG4gIH1cblxuICBwcml2YXRlIF9zdWNjZXNzOiBib29sZWFuO1xuICBASG9zdEJpbmRpbmcoJ2NsYXNzLnN1Y2Nlc3MnKVxuICBnZXQgc3VjY2Vzc0NsYXNzKCkge1xuICAgIHJldHVybiB0aGlzLl9zdWNjZXNzO1xuICB9XG5cbiAgQElucHV0KCdjbHJTdWNjZXNzJylcbiAgc2V0IGNsclN1Y2Nlc3ModmFsdWU6IGJvb2xlYW4gfCBzdHJpbmcpIHtcbiAgICB0aGlzLl9zdWNjZXNzID0gaXNCb29sZWFuQXR0cmlidXRlU2V0KHZhbHVlKTtcbiAgfVxuXG4gIHByaXZhdGUgX2RhbmdlcjogYm9vbGVhbjtcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5kYW5nZXInKVxuICBnZXQgZGFuZ2VyQ2xhc3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RhbmdlcjtcbiAgfVxuXG4gIEBJbnB1dCgnY2xyRGFuZ2VyJylcbiAgc2V0IGNsckRhbmdlcih2YWx1ZTogYm9vbGVhbiB8IHN0cmluZykge1xuICAgIHRoaXMuX2RhbmdlciA9IGlzQm9vbGVhbkF0dHJpYnV0ZVNldCh2YWx1ZSk7XG4gIH1cblxuICBwcml2YXRlIF9mbGFzaDogYm9vbGVhbjtcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5mbGFzaCcpXG4gIGdldCBmbGFzaENsYXNzKCkge1xuICAgIHJldHVybiB0aGlzLl9mbGFzaDtcbiAgfVxuXG4gIEBJbnB1dCgnY2xyRmxhc2gnKVxuICBzZXQgY2xyRmxhc2godmFsdWU6IGJvb2xlYW4gfCBzdHJpbmcpIHtcbiAgICB0aGlzLl9mbGFzaCA9IGlzQm9vbGVhbkF0dHJpYnV0ZVNldCh2YWx1ZSk7XG4gIH1cblxuICBwcml2YXRlIF9mbGFzaERhbmdlcjogYm9vbGVhbjtcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5mbGFzaC1kYW5nZXInKVxuICBnZXQgZmxhc2hEYW5nZXJDbGFzcygpIHtcbiAgICByZXR1cm4gdGhpcy5fZmxhc2hEYW5nZXI7XG4gIH1cblxuICBASW5wdXQoJ2NsckZsYXNoRGFuZ2VyJylcbiAgc2V0IGNsckZsYXNoRGFuZ2VyKHZhbHVlOiBib29sZWFuIHwgc3RyaW5nKSB7XG4gICAgdGhpcy5fZmxhc2hEYW5nZXIgPSBpc0Jvb2xlYW5BdHRyaWJ1dGVTZXQodmFsdWUpO1xuICB9XG5cbiAgLy8gQXJpYSBMaXZlXG4gIEBJbnB1dCgnY2xyQXNzZXJ0aXZlJykgYXNzZXJ0aXZlOiBib29sZWFuO1xuICBASW5wdXQoJ2Nsck9mZicpIG9mZjogYm9vbGVhbjtcblxuICAvKipcbiAgICogTWFrZSBzdXJlIHRoYXQgd2UgYWx3YXlzIHdpbGwgaGF2ZSBzb21ldGhpbmcgdGhhdCBpcyByZWFkYWJsZVxuICAgKiBmb3IgdGhlIHNjcmVlbiByZWFkZXJcbiAgICovXG4gIGdldCBkaXNwbGF5VmFsdWUoKSB7XG4gICAgaWYgKHRoaXMuZGlzcGxheXZhbCkge1xuICAgICAgcmV0dXJuIHRoaXMuZGlzcGxheXZhbDtcbiAgICB9XG4gICAgcmV0dXJuIGAke3RoaXMudmFsdWV9JWA7XG4gIH1cblxuICAvKipcbiAgICogRGlzcGxheSBhcmlhLWxpdmUgb25seSB3aGVuIHRoZXJlIGlzIHZhbHVlIGFuZCBpdCdzIG5vdCAwIG9yIGVxdWFsIHRvIHRoZSBtYXggdmFsdWVcbiAgICovXG4gIGRpc3BsYXlBcmlhTGl2ZSgpIHtcbiAgICByZXR1cm4gKHRoaXMudmFsdWUgIT09IHVuZGVmaW5lZCB8fCB0aGlzLnZhbHVlICE9PSAwKSAmJiB0aGlzLnZhbHVlICE9PSB0aGlzLm1heDtcbiAgfVxuXG4gIGdldCBhcmlhTGl2ZSgpOiBBcmlhTGl2ZVBvbGl0ZW5lc3Mge1xuICAgIGlmIChpc0Jvb2xlYW5BdHRyaWJ1dGVTZXQodGhpcy5hc3NlcnRpdmUpKSB7XG4gICAgICByZXR1cm4gQXJpYUxpdmVQb2xpdGVuZXNzLmFzc2VydGl2ZTtcbiAgICB9XG4gICAgaWYgKGlzQm9vbGVhbkF0dHJpYnV0ZVNldCh0aGlzLm9mZikpIHtcbiAgICAgIHJldHVybiBBcmlhTGl2ZVBvbGl0ZW5lc3Mub2ZmO1xuICAgIH1cbiAgICByZXR1cm4gQXJpYUxpdmVQb2xpdGVuZXNzLnBvbGl0ZTtcbiAgfVxufVxuIl19